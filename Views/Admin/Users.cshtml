@using Microsoft.EntityFrameworkCore.Metadata.Internal
    @model IEnumerable<TaskManager.Models.User>
    @{
        var count = 1;
        ViewData["Title"] = "Manage Users";
    }

    <h2 class="text-secondary  text-center">
    <i class="bi bi-people me-2">
    Manage Users
    </i>
    </h2>
    

    @if (TempData["Message"] != null)
    {
        <div class="alert alert-success">@TempData["Message"]</div>
    }


    <p>
        <a class="btn create btn-secondary" href="/Admin/Create">
        <i class="bi bi-plus"></i>
        Create New User 
        </a>
    </p>

    <table id="myTable" class="table table-bordered table-hover align-middle table-striped modern-table">
        <thead class="table-dark">
            <tr>
                <th class="border border-2 text-center">
                Sr.No
                </th>
                <th class="border border-2 text-center">
                Name
                </th>
                <th class="border border-2 text-center">
                Email
                </th>
                <th class="border border-2 text-center"> 
                Role</th>
                <th class="border border-2 text-center">
                
                Reset Password
                </th>
                <th class="border border-2 text-center">
                Delete User
                </th>

                <th class="border border-2 text-center">
                    Edit Role
                    
                </th>

            </tr>
        </thead>
        <tbody>
        @foreach (var u in Model)
        {
            <tr>
                <td class="text-center">@count</td>
                <td class="text-center text-primary">@u.Name</td>
                <td class="text-center">@u.Email</td>
                <td class="text-center">@u.Role?.RoleName</td>
                <td class="text-center">
                    <a href="/Admin/ResetPassword/@u.Id" class="btn btn-sm btn-outline-secondary btn-sm">
                    <i class="bi bi-key me-1"></i>
                    Reset Password
                    </a>
                </td>
                <td class="text-center">
                    <a href="/Admin/DeleteUserPage/@u.Id" class="btn btn-sm btn-outline-danger ms-1"><i class="bi bi-trash3"></i> Delete User</a>
                </td>
                <td class="text-center">
                    <a href="/Admin/EditUserRole/@u.Id" class="btn btn-sm btn-outline-primary me-1">
                    <i class="bi bi-pencil-square"></i>
                    Edit
                    </a>
                </td>
            </tr>
            count++;
        }
        </tbody>
    </table>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#myTable').DataTable({
                paging: true,
                pageLength: 10,
                lengthMenu: [10, 25, 50, 100],
                lengthChange: false,

                // pagination style
                pagingType: "full_numbers",

                language: {
                    paginate: {
                        previous: "Previous",
                        next: "Next"
                    }
                }
            });

        });
    </script>
}