@model TaskManager.Models.TaskItem
@using System.Security.Claims

@{
    ViewData["Title"] = "Task Details";
}

<h2 class="text-center text-secondary mb-4">
    <i class="bi bi-card-text me-2"></i> Task Details
</h2>

<div class="card shadow-lg">
    <div class="card-body">

        <dl class="row">

            <dt class="col-sm-4">Title</dt>
            <dd class="col-sm-8">@Model.Title</dd>

            <dt class="col-sm-4">Description</dt>
            <dd class="col-sm-8">@Model.Description</dd>

            <dt class="col-sm-4">Project</dt>
            <dd class="col-sm-8">@Model.Project?.Name</dd>

            <dt class="col-sm-4">Assigned To</dt>
            <dd class="col-sm-8">@Model.AssignedTo?.Name</dd>

            <dt class="col-sm-4">Status</dt>
            <dd class="col-sm-8">
                <span class="badge 
                    @(Model.Status == "Completed" ? "bg-success" :
                      Model.Status == "In Progress" ? "bg-warning text-dark" :
                      "bg-danger")">
                    @Model.Status
                </span>
            </dd>

            <dt class="col-sm-4">Progress</dt>
            <dd class="col-sm-8">
                <div class="progress" style="height: 20px;">
                    <div class="progress-bar rounded-pill 
                        @(Model.Progress >= 90 ? "bg-success" :
                          Model.Progress >= 50 ? "bg-info" :
                          Model.Progress >= 20 ? "bg-warning" :
                          "bg-danger")"
                        style="width:@Model.Progress%">
                        @Model.Progress%
                    </div>
                </div>
            </dd>

            <dt class="col-sm-4">Deadline</dt>
            <dd class="col-sm-8">
                @(Model.Deadline.HasValue
                    ? Model.Deadline.Value.ToLocalTime().ToString("dd MMM yyyy")
                    : "No Deadline")
            </dd>

            <dt class="col-sm-4">Created On</dt>
            <dd class="col-sm-8">
                @Model.CreatedAt.ToLocalTime().ToString("dd MMM yyyy")
            </dd>

        </dl>

        <div class="text-center mt-4">
            <a href="/Tasks" class="btn btn-secondary px-4">
                <i class="bi bi-arrow-left"></i> Back to Tasks
            </a>
        </div>

    </div>
</div>
